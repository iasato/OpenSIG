DELETE FROM sis_acao WHERE sis_acao_classe LIKE '%ComandoExportar%' AND sis_acao_classe != 'br.com.opensig.core.client.controlador.comando.exportar.ComandoExportar';DELETE FROM sis_acao WHERE sis_acao_classe LIKE '%ComandoImportar%' AND sis_acao_classe != 'br.com.opensig.core.client.controlador.comando.importar.ComandoImportar';DELETE FROM `sis_acao` WHERE `sis_acao_id`='62';DELETE FROM `sis_acao` WHERE `sis_acao_id`='73';DELETE FROM `sis_acao` WHERE `sis_acao_id`='74';INSERT INTO `sis_acao` (`sis_funcao_id`, `sis_acao_classe`, `sis_acao_ordem`, `sis_acao_subordem`, `sis_acao_ativo`, `sis_acao_visivel`) VALUES ('67', 'br.com.opensig.comercial.client.controlador.comando.acao.ComandoFecharEcfVenda', '11', '0', '1', '1');UPDATE `sis_acao` SET `sis_acao_ordem`='1' WHERE `sis_acao_id`='78';UPDATE `sis_acao` SET `sis_acao_classe`='br.com.opensig.core.client.controlador.comando.lista.ComandoExportar' WHERE `sis_acao_id`='7';UPDATE `sis_acao` SET `sis_acao_classe`='br.com.opensig.core.client.controlador.comando.lista.ComandoImportar' WHERE `sis_acao_id`='8';UPDATE sis_acao SET sis_acao_subordem = 0 WHERE sis_acao_id = '7' OR  sis_acao_id = '8';DELETE FROM sis_permissao WHERE sis_acao_id > 0 AND NOT sis_acao_id IN (SELECT sis_acao_id FROM sis_acao);DELETE FROM sis_permissao WHERE sis_funcao_id > 0 AND NOT sis_funcao_id IN (SELECT sis_funcao_id FROM sis_funcao);DELETE FROM sis_permissao WHERE sis_modulo_id > 0 AND NOT sis_modulo_id IN (SELECT sis_modulo_id FROM sis_modulo);/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;/*!40101 SET NAMES utf8 */;/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;/*!40103 SET TIME_ZONE='+00:00' */;/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;---- Table structure for table `sis_exp_imp`--DROP TABLE IF EXISTS `sis_exp_imp`;/*!40101 SET @saved_cs_client     = @@character_set_client */;/*!40101 SET character_set_client = utf8 */;CREATE TABLE `sis_exp_imp` (  `sis_exp_imp_id` int(11) NOT NULL AUTO_INCREMENT,  `sis_exp_imp_nome` varchar(10) NOT NULL,  `sis_exp_imp_extensoes` varchar(100) NOT NULL,  `sis_exp_imp_descricao` varchar(100) NOT NULL,  `sis_exp_imp_imagem` varchar(20) NOT NULL,  `sis_exp_imp_classe` varchar(255) NOT NULL,  `sis_exp_imp_funcao` varchar(255) NOT NULL,  `sis_exp_imp_tipo` varchar(1) NOT NULL,  `sis_exp_imp_modelo` text NOT NULL,  PRIMARY KEY (`sis_exp_imp_id`)) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1;/*!40101 SET character_set_client = @saved_cs_client */;---- Dumping data for table `sis_exp_imp`--LOCK TABLES `sis_exp_imp` WRITE;/*!40000 ALTER TABLE `sis_exp_imp` DISABLE KEYS */;INSERT INTO `sis_exp_imp` VALUES (1,'NFe','xml','Importação da compra diretamente pelo NFe emitida.','nfe.png','br.com.opensig.comercial.server.acao.ImportarNfe','br.com.opensig.comercial.client.controlador.comando.ComandoCompra','I',''),(2,'NFe','xml zip','Importação da NFe emitidas em qualquer status.','xml.png','br.com.opensig.fiscal.server.acao.RecuperarSaida','br.com.opensig.fiscal.client.controlador.comando.ComandoSaida','I',''),(3,'NFe','xml zip','Importação da NFe recebidas em qualquer status.','xml.png','br.com.opensig.fiscal.server.acao.RecuperarEntrada','br.com.opensig.fiscal.client.controlador.comando.ComandoEntrada','I',''),(4,'CAT-52','','Importação do padrão cat52 que é utilizado pelas ECF','txt.png','br.com.opensig.comercial.server.acao.ImportarCat52','br.com.opensig.comercial.client.controlador.comando.ComandoEcfVenda','I','<beanio xmlns=\"http://www.beanio.org/2011/01\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.beanio.org/2011/01 http://www.beanio.org/2011/01/mapping.xsd\">\n\n	<typeHandler name=\"TipoBooleano\" class=\"br.com.opensig.comercial.server.TipoBooleano\" />\n        <typeHandler name=\"TipoDouble\" class=\"br.com.opensig.comercial.server.TipoDouble\" />\n\n	<stream name=\"cat52\" format=\"fixedlength\">\n		<record name=\"ecf\" minOccurs=\"1\" maxOccurs=\"1\" class=\"br.com.opensig.comercial.shared.modelo.ComEcf\">\n			<field name=\"tipo\" rid=\"true\" literal=\"E01\" length=\"3\" ignore=\"true\" />\n			<field name=\"comEcfSerie\" length=\"20\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"f1\" length=\"28\" ignore=\"true\" />\n			<field name=\"comEcfModelo\" length=\"20\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"f4\" length=\"24\" ignore=\"true\" />\n			<field name=\"comEcfCaixa\" length=\"3\" type=\"int\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"f6\" length=\"68\" ignore=\"true\" />\n		</record>\n		<record name=\"z\" minOccurs=\"1\" maxOccurs=\"1\" class=\"br.com.opensig.comercial.shared.modelo.ComEcfZ\">\n			<field name=\"tipo\" rid=\"true\" literal=\"E02\" length=\"3\" ignore=\"true\" />\n			<field name=\"f1\" length=\"249\" ignore=\"true\" />\n			<field name=\"comEcfZTotal\" length=\"18\" type=\"double\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoDouble\" />\n			<field name=\"f2\" length=\"2\" ignore=\"true\" />\n		</record>\n		<record name=\"z2\" minOccurs=\"1\" maxOccurs=\"1\" class=\"br.com.opensig.comercial.shared.modelo.ComEcfZ\">\n			<field name=\"tipo\" rid=\"true\" literal=\"E12\" length=\"3\" ignore=\"true\" />\n			<field name=\"f1\" length=\"43\" ignore=\"true\" />\n			<field name=\"comEcfZCrz\" length=\"6\" type=\"int\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"comEcfZCoo\" length=\"6\" type=\"int\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"comEcfZCro\" length=\"6\" type=\"int\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"comEcfZData\" length=\"8\" type=\"datetime\" minOccurs=\"1\" maxOccurs=\"1\" format=\"yyyyMMdd\" />\n			<field name=\"f2\" length=\"14\" ignore=\"true\" />\n			<field name=\"comEcfZBruto\" length=\"14\" type=\"double\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoDouble\" />\n			<field name=\"f3\" length=\"1\" ignore=\"true\" />\n		</record>\n		<record name=\"zt\" minOccurs=\"0\" maxOccurs=\"unbounded\" class=\"br.com.opensig.comercial.shared.modelo.ComEcfZTotais\">\n			<field name=\"tipo\" rid=\"true\" literal=\"E13\" length=\"3\" ignore=\"true\" />\n			<field name=\"f1\" length=\"49\" ignore=\"true\" />\n			<field name=\"comEcfZTotaisCodigo\" length=\"7\" minOccurs=\"1\" maxOccurs=\"1\" trim=\"true\" />\n			<field name=\"comEcfZTotaisValor\" length=\"13\" type=\"double\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoDouble\" />\n		</record>\n		<record name=\"venda\" minOccurs=\"0\" maxOccurs=\"unbounded\" class=\"br.com.opensig.comercial.shared.modelo.ComEcfVenda\">\n			<field name=\"tipo\" rid=\"true\" literal=\"E14\" length=\"3\" ignore=\"true\" />\n			<field name=\"f1\" length=\"49\" ignore=\"true\" />\n			<field name=\"comEcfVendaCoo\" length=\"6\" type=\"int\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"comEcfVendaData\" length=\"8\" type=\"date\" minOccurs=\"1\" maxOccurs=\"1\" format=\"yyyymmdd\" />\n			<field name=\"comEcfVendaBruto\" length=\"14\" type=\"double\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoDouble\" />\n                            <field name=\"comEcfVendaDesconto\" length=\"13\" type=\"double\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoDouble\" />\n			<field name=\"f2\" length=\"15\" ignore=\"true\" />\n			<field name=\"comEcfVendaLiquido\" length=\"14\" type=\"double\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoDouble\" />\n			<field name=\"comEcfVendaCancelada\" length=\"1\" type=\"boolean\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoBooleano\" />\n			<field name=\"f2\" length=\"14\" ignore=\"true\" />\n			<field name=\"comEcfVendaNome\" length=\"40\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"comEcfVendaCpf\" length=\"14\" minOccurs=\"1\" maxOccurs=\"1\" />\n		</record>\n		<record name=\"produto\" minOccurs=\"0\" maxOccurs=\"unbounded\" class=\"br.com.opensig.comercial.shared.modelo.ComEcfVendaProduto\">\n			<field name=\"tipo\" rid=\"true\" literal=\"E15\" length=\"3\" ignore=\"true\" />\n			<field name=\"f1\" length=\"43\" ignore=\"true\" />\n			<field name=\"comEcfVendaProdutoCoo\" length=\"6\" type=\"int\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"f2\" length=\"6\" ignore=\"true\" />\n			<field name=\"comEcfVendaProdutoOrdem\" length=\"3\" type=\"int\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"comEcfVendaProdutoCodigo\" length=\"14\" minOccurs=\"1\" maxOccurs=\"1\" trim=\"true\" />\n			<field name=\"comEcfVendaProdutoDescricao\" length=\"100\" minOccurs=\"1\" maxOccurs=\"1\" trim=\"true\" />\n			<field name=\"comEcfVendaProdutoQuantidade\" length=\"7\" type=\"double\" minOccurs=\"1\" maxOccurs=\"1\" />\n			<field name=\"comEcfVendaProdutoUnd\" length=\"3\" minOccurs=\"1\" maxOccurs=\"1\" trim=\"true\"/>\n			<field name=\"comEcfVendaProdutoBruto\" length=\"8\" type=\"double\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoDouble\" />\n			<field name=\"comEcfVendaProdutoDesconto\" length=\"8\" type=\"double\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoDouble\" />\n			<field name=\"f3\" length=\"8\" ignore=\"true\" />\n			<field name=\"comEcfVendaProdutoTotal\" length=\"14\" type=\"double\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoDouble\" />\n			<field name=\"f4\" length=\"7\" ignore=\"true\" />\n			<field name=\"comEcfVendaProdutoCancelado\" length=\"1\" type=\"boolean\" minOccurs=\"1\" maxOccurs=\"1\" typeHandler=\"TipoBooleano\" />\n			<field name=\"f5\" length=\"36\" ignore=\"true\" />\n		</record>\n	</stream>\n</beanio>');/*!40000 ALTER TABLE `sis_exp_imp` ENABLE KEYS */;UNLOCK TABLES;/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;INSERT INTO `sis_modulo` (`sis_modulo_id`, `sis_modulo_classe`, `sis_modulo_ordem`, `sis_modulo_ativo`) VALUES ('2', 'br.com.opensig.core.client.OpenSigCore', '100', '1');INSERT INTO `sis_funcao` (`sis_modulo_id`, `sis_funcao_classe`, `sis_funcao_ordem`, `sis_funcao_subordem`, `sis_funcao_ativo`) VALUES ('2', 'br.com.opensig.core.client.controlador.comando.ComandoExpImp', '1', '0', '1');UPDATE `sis_funcao` SET `sis_modulo_id`='2', `sis_funcao_ordem`='1' WHERE `sis_funcao_id`='60';ALTER TABLE `com_ecf_z` CHANGE COLUMN `com_ecf_z_data` `com_ecf_z_data` DATE NOT NULL  ;CREATE  TABLE `com_ecf_z_totais` (  `com_ecf_z_totais_id` INT NOT NULL AUTO_INCREMENT ,  `com_ecf_z_id` INT NOT NULL ,  `com_ecf_z_totais_codigo` VARCHAR(7) NOT NULL ,  `com_ecf_z_totais_valor` DECIMAL(13,2) NOT NULL ,  PRIMARY KEY (`com_ecf_z_totais_id`) )ENGINE = InnoDB;ALTER TABLE `com_ecf_z_totais`   ADD CONSTRAINT `FK_com_ecf_z_totais_1`  FOREIGN KEY (`com_ecf_z_id` )  REFERENCES `com_ecf_z` (`com_ecf_z_id` )  ON DELETE NO ACTION  ON UPDATE NO ACTION, ADD INDEX `FK_com_ecf_z_totais_1` USING BTREE (`com_ecf_z_id` ASC) ;ALTER TABLE `com_ecf_venda` ADD COLUMN `com_ecf_venda_fechada` TINYINT(1) NOT NULL  AFTER `com_ecf_venda_liquido` , ADD COLUMN `sis_usuario_id` INT NOT NULL  AFTER `com_ecf_id`, CHANGE COLUMN `fin_receber_id` `fin_receber_id` INT(11) NULL, CHANGE COLUMN `com_ecf_venda_data` `com_ecf_venda_data` DATE NOT NULL  ;ALTER TABLE `com_ecf_venda`   ADD CONSTRAINT `FK_com_ecf_venda_4`  FOREIGN KEY (`sis_usuario_id` )  REFERENCES `sis_usuario` (`sis_usuario_id` )  ON DELETE NO ACTION  ON UPDATE NO ACTION, ADD INDEX `FK_com_ecf_venda_4` USING BTREE (`sis_usuario_id` ASC) ;ALTER TABLE `com_ecf_venda_produto` ADD COLUMN `com_ecf_venda_produto_codigo` VARCHAR(14) NOT NULL  AFTER `prod_embalagem_id` , ADD COLUMN `com_ecf_venda_produto_descricao` VARCHAR(100) NOT NULL  AFTER `com_ecf_venda_produto_codigo`, ADD COLUMN `com_ecf_venda_produto_desconto` DECIMAL(10,2) NOT NULL  AFTER `com_ecf_venda_produto_bruto` , ADD COLUMN `com_ecf_venda_produto_liquido` DECIMAL(10,2) NOT NULL  AFTER `com_ecf_venda_produto_desconto` , CHANGE COLUMN `com_ecf_venda_produto_valor` `com_ecf_venda_produto_bruto` DECIMAL(10,2) NOT NULL , CHANGE COLUMN `prod_produto_id` `prod_produto_id` INT(11) NULL  ;ALTER TABLE `com_ecf` ADD UNIQUE INDEX `UNIQUE` USING BTREE (`com_ecf_serie` ASC) ;ALTER TABLE `com_ecf_venda` ADD UNIQUE INDEX `UNIQUE` USING BTREE (`com_ecf_id` ASC, `com_ecf_venda_coo` ASC) ;INSERT INTO `fin_categoria` (`fin_categoria_id`, `fin_categoria_descricao`) VALUES ('5', 'ECF');